<form method="POST" action="/certificate" id="admin_group_form">
  <div class="form-group">
    <label for="set_admin_group"
      ><strong
        >Hier kann eine initiale Admin-Gruppe definiert werden.</strong
      ></label
    >
    <input
      type="text"
      class="form-control"
      id="set_admin_group"
      name="admin_group"
      placeholder="z.B. Verwaltung, role-admins, etc."
      value="{{DATA_INITIAL_ADMIN_GROUP}}"
    />
    <p>
      Bei Linuxmuster-Installationen ist "role-globaladministrator"
      standardmäßig aktiviert.
    </p>
    <p
      id="generic_warning"
      style="display: none; color: #d9534f; font-weight: bold"
    >
      Bei Unternehmens-Installationen muss eine Admin-Gruppe angegeben werden!
    </p>
  </div>

  <input
    type="hidden"
    id="deployment_target"
    value="{{DATA_DEPLOYMENT_TARGET}}"
  />

  <br />
  <hr />
  <br />

  <button type="submit" class="login-submit-btn" id="btn_install">
    Weiter
  </button>
</form>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("admin_group_form");
    const adminGroupInput = document.getElementById("set_admin_group");
    const deploymentTarget = document.getElementById("deployment_target").value;
    const genericWarning = document.getElementById("generic_warning");

    if (deploymentTarget === "generic") {
      genericWarning.style.display = "block";
      adminGroupInput.required = true;
    }

    form.addEventListener("submit", function (event) {
      if (deploymentTarget === "generic") {
        const adminGroup = adminGroupInput.value.trim();

        if (!adminGroup) {
          event.preventDefault();
          alert(
            "Bitte geben Sie eine Admin-Gruppe an! Bei Generic-Installationen ist dieses Feld verpflichtend."
          );
          adminGroupInput.focus();
          return false;
        }
      }
    });
  });
</script>
<br />
<form method="GET" action="/token">
  <button type="submit" class="qr-login-btn">Abbrechen</button>
</form>
